<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <title>{{ movie.title }} - Movie Mania</title>
        <link rel="stylesheet" href="{{ url_for('static', filename='styles.css') }}" />
    </head>
    <body>
        <nav class="navbar">
            <a href="/" class="navbutton">All Movies</a>
            {% if session.username %}
            <a href="/add" class="navbutton">Add Movie</a>
            <a href="/favorites" class="navbutton">Favorites</a>
            <a href="/logout" class="navbutton">Logout</a>
            {% else %}
            <a href="/login" class="navbutton">Login</a>
            {% endif %}
        </nav>

        <main class="movie-detail-main">
            <div class="movie-hero">
                <div class="movie-poster-placeholder">üé¨</div>

                <div class="movie-info">
                    <div class="movie-title-section">
                        <h1>{{ movie.title }}</h1>
                        {% if movie.year %}
                        <span class="movie-year-badge">{{ movie.year }}</span>
                        {% endif %}
                    </div>

                    <div class="movie-rating-section">
                        {% if movie.rating %}
                        <div class="rating-display">
                            <div class="stars">
                                {% for i in range(1, 11) %} {% if i <= (movie.rating | int) %}
                                <span class="star filled">‚≠ê</span>
                                {% elif i == ((movie.rating | int) + 1) and (movie.rating % 1) >= 0.5 %}
                                <span class="star half">‚≠ê</span>
                                {% else %}
                                <span class="star empty">‚òÜ</span>
                                {% endif %} {% endfor %}
                            </div>
                            <span class="rating-number">{{ movie.rating }}/10</span>
                        </div>
                        {% endif %}
                    </div>

                    <div class="movie-badges">
                        {% if movie.genre %}
                        <span class="badge genre-badge">{{ movie.genre.title() }}</span>
                        {% endif %} {% if movie.duration %}
                        <span class="badge duration-badge">{{ movie.duration }} min</span>
                        {% endif %} {% if movie.favorite %}
                        <span class="badge favorite-badge">‚≠ê Favorite</span>
                        {% endif %} {% if movie.rewatchable %}
                        <span class="badge rewatchable-badge">üîÑ Rewatchable</span>
                        {% endif %}
                    </div>
                </div>

                {% if session.username %}
                <div class="movie-actions-hero">
                    <button class="btn-favorite" id="favoriteBtn">
                        {% if movie.is_favorite %} üíñ Remove from Favorites {% else %} ü§ç Add to Favorites {% endif %}
                    </button>
                </div>
                {% endif %}
            </div>

            <div class="movie-details-grid">
                <div class="detail-card">
                    <h3>üé≠ Movie Details</h3>
                    <div class="detail-list">
                        {% if movie.director %}
                        <div class="detail-item">
                            <span class="detail-label">Director:</span>
                            <span class="detail-value">{{ movie.director }}</span>
                        </div>
                        {% endif %} {% if movie.platform %}
                        <div class="detail-item">
                            <span class="detail-label">Platform:</span>
                            <span class="detail-value platform-{{ movie.platform }}">{{ movie.platform.title() }}</span>
                        </div>
                        {% endif %} {% if movie.watch_date %}
                        <div class="detail-item">
                            <span class="detail-label">Watch Date:</span>
                            <span class="detail-value">{{ movie.watch_date }}</span>
                        </div>
                        {% endif %} {% if movie.watched_with %}
                        <div class="detail-item">
                            <span class="detail-label">Watched With:</span>
                            <span class="detail-value">{{ movie.watched_with }}</span>
                        </div>
                        {% endif %}
                    </div>
                </div>

                {% if movie.review %}
                <div class="detail-card review-card">
                    <h3>üìù My Review</h3>
                    <div class="review-content">
                        <p>{{ movie.review }}</p>
                    </div>
                </div>
                {% endif %}
            </div>

            <div class="movie-meta-footer">
                <small>Added on {{ movie.created_at if movie.created_at else 'Unknown date' }}</small>
            </div>
        </main>
    </body>
</html>
